{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["Fancybox.bind(\"[data-fancybox]\", {\r\n    // Your custom options\r\n});\r\n\r\n// animation \r\nconst animationItems = document.querySelectorAll('.animation-item');\r\nif (animationItems.length > 0) {\r\n    function onEntry(e) {\r\n        e.forEach(e => {\r\n            e.isIntersecting && e.target.classList.add(\"animation-active\")\r\n        }\r\n        )\r\n    }\r\n    let options = {\r\n        threshold: [.5]\r\n    }, observer = new IntersectionObserver(onEntry, options)\r\n    for (let e of animationItems)\r\n        observer.observe(e);\r\n}\r\n// end animation\r\n\r\nlet scrollWidthFunc = () => {\r\n    let scrollWidth = window.innerWidth - document.body.clientWidth;\r\n    document.querySelector('html').style.paddingRight = scrollWidth + 'px';\r\n    document.querySelector('header').style.paddingRight = scrollWidth + 'px';\r\n}\r\nconst scrollTop = document.querySelector('.scroll-top');\r\nif (scrollTop)\r\n    scrollTop.addEventListener('click', () => {\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    });\r\n\r\n\r\n/* hide header */\r\n// ['load', 'resize'].forEach((event) => {\r\n//     window.addEventListener(event, function () {\r\n//         let headerHeight = header.clientHeight;\r\n//         const plashka = header.querySelector('.header__plashka');\r\n//         const headerTop = header.querySelector('.header__top');\r\n//         if (plashka) {\r\n//             var originalHeightPlashka = plashka.offsetHeight;\r\n//             var originalHeightHeaderTop = headerTop.offsetHeight;\r\n//         }\r\n//         window.onscroll = function (e) {\r\n//             if (window.scrollY > headerHeight) {\r\n//                 if (!plashka.classList.contains('hide')) {\r\n//                     plashka.classList.add('hide');\r\n//                     plashka.style.height = '0px';\r\n//                     plashka.style.opacity = '0';\r\n//                     plashka.style.overflow = 'hidden';\r\n\r\n//                     if(window.innerWidth > 1260) {\r\n//                         headerTop.classList.add('hide');\r\n//                         headerTop.style.height = '0px';\r\n//                         headerTop.style.opacity = '0';\r\n//                         headerTop.style.overflow = 'hidden';\r\n//                     }\r\n//                 }\r\n//             }\r\n//             else {\r\n//                 plashka.style.height = originalHeightPlashka + 'px';\r\n//                 plashka.classList.remove('hide');\r\n//                 plashka.style.opacity = '1';\r\n\r\n//                 headerTop.style.height = originalHeightHeaderTop + 'px';\r\n//                 headerTop.classList.remove('hide');\r\n//                 headerTop.style.opacity = '1';\r\n//                 headerTop.style.overflow = 'visible';\r\n//             }\r\n//         };\r\n//     })\r\n// })\r\n/* hide header */\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    /* burger menu */\r\n    const burgerMenu = document.querySelector('.burger__menu');\r\n    if (burgerMenu) {\r\n        const headerMobile = document.querySelector('.header__menu');\r\n        const header = document.querySelector('.header');\r\n        const plashka = document.querySelector('.header__plashka');\r\n        burgerMenu.addEventListener(\"click\", () => {\r\n            if (burgerMenu.classList.contains('burger__menu--active')) {\r\n                if (plashka) {\r\n                    plashka.style.display = 'block';\r\n                }\r\n                document.body.classList.remove('burger-lock');\r\n            }\r\n            else {\r\n                if (plashka) {\r\n                    plashka.style.display = 'none';\r\n                }\r\n                document.body.classList.add('burger-lock');\r\n            }\r\n            headerMobile.classList.toggle(\"header__menu--active\");\r\n            burgerMenu.classList.toggle(\"burger__menu--active\");\r\n            header.classList.toggle(\"header--active\");\r\n\r\n            document.querySelector('html').classList.toggle('burger-lock');\r\n        });\r\n    }\r\n    /* end burger menu */\r\n\r\n\r\n    // Popups\r\n    function popupClose(popupActive) {\r\n        popupActive.classList.remove('open');\r\n        setTimeout(() => {\r\n            if (!popupActive.classList.contains('open')) {\r\n                popupActive.classList.remove('active');\r\n            }\r\n        }, 400);\r\n        document.body.classList.remove('lock');\r\n        document.querySelector('html').style.paddingRight = 0;\r\n        document.querySelector('html').classList.remove('lock');\r\n        document.querySelector('header').removeAttribute('style');\r\n\r\n\r\n    }\r\n    const popupOpenBtns = document.querySelectorAll('.popup-btn');\r\n    const popups = document.querySelectorAll('.popup');\r\n    const originalTitlePopup2 = document.querySelector('.original-title').innerHTML;\r\n    const closePopupBtns = document.querySelectorAll('.close-popup-btn');\r\n    closePopupBtns.forEach(function (el) {\r\n        el.addEventListener('click', function (e) {\r\n            popupClose(e.target.closest('.popup'));\r\n        });\r\n    });\r\n    popupOpenBtns.forEach(function (el) {\r\n        el.addEventListener('click', function (e) {\r\n            e.preventDefault();\r\n            const path = e.currentTarget.dataset.path;\r\n            const currentPopup = document.querySelector(`[data-target=\"${path}\"]`);\r\n            if (currentPopup) {\r\n                popups.forEach(function (popup) {\r\n                    popupClose(popup);\r\n                    popup.addEventListener('click', function (e) {\r\n                        if (!e.target.closest('.popup__content')) {\r\n                            popupClose(e.target.closest('.popup'));\r\n                        }\r\n                    });\r\n                });\r\n                currentPopup.classList.add('active');\r\n                setTimeout(() => {\r\n                    currentPopup.classList.add('open');\r\n                }, 10);\r\n                if (currentPopup.getAttribute('data-target') == 'popup-change') {\r\n\r\n                    let originaTitle = currentPopup.querySelector('.original-title');\r\n                    if (el.classList.contains('change-item__btn')) {\r\n\r\n                        if (el.classList.contains('doctor__btn-js')) {\r\n                            let currentItem = el.closest('.change-item');\r\n                            let currentTitile = currentItem.querySelector('.change-item__title');\r\n                            originaTitle.innerHTML = 'Записаться на приём к врачу: ' + currentTitile.innerHTML\r\n                        }\r\n                        else {\r\n                            if (el.classList.contains('change-item__btn_current')) {\r\n                                originaTitle.textContent = el.textContent;\r\n                            }\r\n                            else {\r\n                                let currentItem = el.closest('.change-item');\r\n                                let currentTitile = currentItem.querySelector('.change-item__title');\r\n                                originaTitle.innerHTML = currentTitile.innerHTML\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        originaTitle.innerHTML = originalTitlePopup2;\r\n                    }\r\n                }\r\n\r\n                if (currentPopup.getAttribute('data-target') == 'popup-jobs') {\r\n                    let currentItems = el.closest('.jobs__items') \r\n                    let originalText = currentPopup.querySelector('.jobs__inner_original');\r\n                    if(originalText && currentItems.querySelector('.jobs__inner')) {\r\n                        originalText.innerHTML = currentItems.querySelector('.jobs__inner').innerHTML;\r\n                    }\r\n                }\r\n                e.stopPropagation();\r\n                scrollWidthFunc();\r\n                document.querySelector('html').classList.add('lock');\r\n            }\r\n        });\r\n    });\r\n    // end popups\r\n\r\n\r\n\r\n    /* Фильтрация категорий */\r\n    const filter = document.querySelector(\".filter\");\r\n    if (filter) {\r\n        const applyBtn = filter.querySelector(\".category__filter-btn\");\r\n        const clearBtn = filter.querySelector(\".category__filter-btnClear\");\r\n        const checkboxes = filter.querySelectorAll(\".sort-checkbox input\");\r\n        const cardsContainer = filter.querySelector(\".category__cards\");\r\n        const cards = filter.querySelectorAll(\".category__card\");\r\n\r\n        const tagButtons = filter.querySelectorAll(\".category__link\");\r\n        const moreBtn = filter.querySelector(\".category__link-more\");\r\n\r\n        const sortNameSelect = document.getElementById(\"sort-name\");\r\n        const sortPriceSelect = document.getElementById(\"sort-price\");\r\n\r\n        let showAllTags = false;\r\n\r\n        // Кнопка \"Еще\" для тегов \r\n        function updateTagsVisibility() {\r\n            tagButtons.forEach((btn, index) => {\r\n                if (btn.classList.contains(\"category__link-more\")) return;\r\n                btn.style.display = (!showAllTags && index >= 10) ? \"none\" : \"inline-block\";\r\n            });\r\n            moreBtn.textContent = showAllTags ? \"Свернуть\" : `Еще ${tagButtons.length - 10}`;\r\n        }\r\n\r\n        if (moreBtn) {\r\n            moreBtn.addEventListener(\"click\", () => {\r\n                showAllTags = !showAllTags;\r\n                updateTagsVisibility();\r\n            });\r\n        }\r\n\r\n        updateTagsVisibility(); // скрыть теги при загрузке\r\n\r\n        // Активируем/деактивируем теги\r\n        // if (tagButtons) {\r\n        //     tagButtons.forEach(btn => {\r\n        //         if (!btn.classList.contains(\"category__link-more\")) {\r\n        //             btn.addEventListener(\"click\", () => {\r\n        //                 btn.classList.toggle(\"active\");\r\n        //                 applyFilters();\r\n        //                 updateCheckboxesState();\r\n        //             });\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n        document.querySelectorAll('.category__link').forEach(btn => {\r\n            if (!btn.classList.contains(\"category__link-more\")) {\r\n                btn.addEventListener(\"click\", function (e) {\r\n                    e.preventDefault();\r\n\r\n                    // Берём код тега из дата-атрибута\r\n                    const tagCode = this.dataset.tagValue;\r\n\r\n                    // Формируем URL с GET-параметром\r\n                    const url = new URL(window.location.href);\r\n                    url.searchParams.set('filter', tagCode);\r\n\r\n                    // Переход по новому URL\r\n                    window.location.href = url.toString();\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n        // Функция проверки, приведет ли выбор чекбокса к пустому списку\r\n        function willCheckboxCauseEmptyList(checkbox, currentFilters, activeTags) {\r\n            // Создаем копию текущих фильтров и добавляем тестируемый чекбокс\r\n            let testFilters = { ...currentFilters };\r\n            const filterGroup = checkbox.name.split(\"-\")[0];\r\n            if (!testFilters[filterGroup]) testFilters[filterGroup] = [];\r\n            testFilters[filterGroup] = [...testFilters[filterGroup], checkbox.labels[0].innerText.trim()];\r\n\r\n            let hasVisibleCard = false;\r\n\r\n            cards.forEach(card => {\r\n                let visible = true;\r\n\r\n                // Проверка по тегам\r\n                // if (activeTags.length > 0) {\r\n                //     const cardTags = card.dataset.tags ? card.dataset.tags.split(\",\").map(t => t.trim()) : [];\r\n                //     if (!activeTags.some(tag => cardTags.includes(tag))) {\r\n                //         visible = false;\r\n                //     }\r\n                // }\r\n\r\n                // Проверка по фильтрам\r\n                if (visible) {\r\n                    for (let group in testFilters) {\r\n                        let cardValues = card.dataset[group];\r\n\r\n                        if (cardValues.includes(',')) {\r\n                            cardValues = cardValues.split(',');\r\n                        } else {\r\n                            cardValues = [cardValues];\r\n                        }\r\n\r\n                        let matchFound = false;\r\n                        for (const value of cardValues) {\r\n                            if (testFilters[group].includes(value.trim())) {\r\n                                matchFound = true;\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        if (!matchFound && testFilters[group].length > 0) {\r\n                            visible = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (visible) {\r\n                    hasVisibleCard = true;\r\n                }\r\n            });\r\n\r\n            return !hasVisibleCard; // Возвращает true, если список будет пустым\r\n        }\r\n\r\n        // Функция обновления состояния чекбоксов\r\n        function updateCheckboxesState() {\r\n            const activeFilters = {};\r\n            const activeTags = [];\r\n\r\n            // Собираем активные фильтры\r\n            checkboxes.forEach(cb => {\r\n                if (cb.checked) {\r\n                    const filterGroup = cb.name.split(\"-\")[0];\r\n                    if (!activeFilters[filterGroup]) activeFilters[filterGroup] = [];\r\n                    activeFilters[filterGroup].push(cb.labels[0].innerText.trim());\r\n                }\r\n            });\r\n\r\n            // Собираем активные теги\r\n            document.querySelectorAll(\".category__link.active\").forEach(tag => {\r\n                activeTags.push(tag.innerText.trim());\r\n            });\r\n\r\n            // Проверяем каждый чекбокс\r\n            checkboxes.forEach(checkbox => {\r\n                if (!checkbox.checked) {\r\n                    const willBeEmpty = willCheckboxCauseEmptyList(checkbox, activeFilters, activeTags);\r\n                    checkbox.disabled = willBeEmpty;\r\n                    checkbox.parentElement.style.opacity = willBeEmpty ? '0.5' : '1'; // Визуальная индикация\r\n                } else {\r\n                    checkbox.disabled = false;\r\n                    checkbox.parentElement.style.opacity = '1';\r\n                }\r\n            });\r\n        }\r\n\r\n        // Фильтрация\r\n        function applyFilters() {\r\n            let activeFilters = {};\r\n            let activeTags = [];\r\n\r\n            // Собираем фильтры (сайдбар)\r\n            checkboxes.forEach(cb => {\r\n                if (cb.checked) {\r\n                    const filterGroup = cb.name.split(\"-\")[0];\r\n                    if (!activeFilters[filterGroup]) activeFilters[filterGroup] = [];\r\n                    activeFilters[filterGroup].push(cb.labels[0].innerText.trim());\r\n                }\r\n            });\r\n\r\n            // Собираем активные теги\r\n            document.querySelectorAll(\".category__link.active\").forEach(tag => {\r\n                activeTags.push(tag.innerText.trim());\r\n            });\r\n\r\n            cards.forEach(card => {\r\n                let visible = true;\r\n\r\n                // Проверка по тегам (приоритетнее)\r\n                if (activeTags.length > 0) {\r\n                    const cardTags = card.dataset.tags ? card.dataset.tags.split(\",\").map(t => t.trim()) : [];\r\n                    if (!activeTags.some(tag => cardTags.includes(tag))) {\r\n                        visible = false;\r\n                    }\r\n                }\r\n\r\n                // Проверка по фильтрам\r\n                if (visible) {\r\n                    for (let group in activeFilters) {\r\n                        let cardValues = card.dataset[group];\r\n\r\n                        if (cardValues.includes(',')) {\r\n                            cardValues = cardValues.split(',');\r\n                        } else {\r\n                            cardValues = [cardValues];\r\n                        }\r\n\r\n                        let matchFound = false;\r\n                        for (const value of cardValues) {\r\n                            if (activeFilters[group].includes(value.trim())) {\r\n                                matchFound = true;\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        if (!matchFound && activeFilters[group].length > 0) {\r\n                            visible = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                card.style.display = visible ? \"block\" : \"none\";\r\n            });\r\n\r\n            updateCheckboxesState(); // Обновляем состояние чекбоксов после фильтрации\r\n        }\r\n\r\n        // Сброс\r\n        function clearFilters() {\r\n            checkboxes.forEach(cb => {\r\n                cb.checked = false;\r\n                cb.disabled = false;\r\n                cb.parentElement.style.opacity = '1';\r\n            });\r\n            applyFilters();\r\n        }\r\n\r\n        // Сортировка\r\n        function applySorting() {\r\n            let sortedCards = Array.from(cards).filter(c => c.style.display !== \"none\");\r\n\r\n            if (sortNameSelect.value !== \"all\") {\r\n                sortedCards.sort((a, b) => {\r\n                    let nameA = a.querySelector(\".category__card-name\").innerText.toLowerCase();\r\n                    let nameB = b.querySelector(\".category__card-name\").innerText.toLowerCase();\r\n                    if (sortNameSelect.value === \"asc\") return nameA.localeCompare(nameB);\r\n                    if (sortNameSelect.value === \"desc\") return nameB.localeCompare(nameA);\r\n                });\r\n            }\r\n\r\n            if (sortPriceSelect.value !== \"all\") {\r\n                sortedCards.sort((a, b) => {\r\n                    let priceA = extractPrice(a);\r\n                    let priceB = extractPrice(b);\r\n\r\n                    if (sortPriceSelect.value === \"asc\") return priceA - priceB;\r\n                    if (sortPriceSelect.value === \"desc\") return priceB - priceA;\r\n                });\r\n            }\r\n\r\n            sortedCards.forEach(card => cardsContainer.appendChild(card));\r\n        }\r\n\r\n        // Вспомогательная функция для цены\r\n        function extractPrice(card) {\r\n            const priceEl = card.querySelector(\".category__card-priceSort\");\r\n            if (!priceEl) return 0;\r\n            let priceText = priceEl.innerText.replace(/[^\\d]/g, \"\");\r\n            return parseInt(priceText) || 0;\r\n        }\r\n\r\n        if (applyBtn) {\r\n            applyBtn.addEventListener(\"click\", () => {\r\n                applyFilters();\r\n                updateCheckboxesState();\r\n            });\r\n        }\r\n        if (clearBtn) {\r\n            clearBtn.addEventListener(\"click\", clearFilters);\r\n        }\r\n\r\n        if (sortNameSelect) {\r\n            sortNameSelect.addEventListener(\"change\", applySorting);\r\n        }\r\n        if (sortPriceSelect) {\r\n            sortPriceSelect.addEventListener(\"change\", applySorting);\r\n        }\r\n\r\n        // Инициализация состояния чекбоксов при загрузке\r\n        updateCheckboxesState();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    // Применение фильтров\r\n    document.querySelector('.category__filter-btn')?.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n        filterObjects();\r\n    });\r\n\r\n    // Сброс фильтров\r\n    document.querySelector('.category__filter-btnClear')?.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n        document.querySelectorAll('.sort-checkbox input').forEach(checkbox => checkbox.checked = false);\r\n        filterObjects('');\r\n    });\r\n\r\n\r\n\r\n\r\n    /* Открытие/закрытие фильтра в мобилке */\r\n    const openFilterBtn = document.getElementById(\"openFilter\");\r\n    const filterWrap = document.querySelector(\".category__filter\");\r\n    const applyFilterBtn = document.querySelector(\".category__filter-btn\");\r\n    const clearFilterBtn = document.querySelector(\".category__filter-btnClear\");\r\n    \r\n    // Функция для открытия/закрытия фильтра\r\n    function toggleFilter() {\r\n        filterWrap.classList.toggle(\"active\");\r\n        document.querySelector('html').classList.toggle('lock');\r\n        document.querySelector('body').classList.toggle('lock');\r\n    }\r\n    \r\n    // Функция для закрытия фильтра\r\n    function closeFilter() {\r\n        filterWrap.classList.remove(\"active\");\r\n        document.querySelector('html').classList.remove('lock');\r\n        document.querySelector('body').classList.remove('lock');\r\n    }\r\n    \r\n    if (openFilterBtn) {\r\n        // Обработчик клика по кнопке открытия\r\n        openFilterBtn.addEventListener(\"click\", (e) => {\r\n            e.stopPropagation();\r\n            toggleFilter();\r\n        });\r\n    \r\n        // Обработчик для кнопки \"Применить фильтр\"\r\n        if (applyFilterBtn) {\r\n            applyFilterBtn.addEventListener(\"click\", () => {\r\n                closeFilter();\r\n            });\r\n        }\r\n\r\n        // Обработчик для кнопки \"Очистить фильтр\"\r\n        if (clearFilterBtn) {\r\n            clearFilterBtn.addEventListener(\"click\", () => {\r\n                closeFilter();\r\n            });\r\n        }\r\n    \r\n        // Обработчик клика по документу для закрытия при клике вне окна\r\n        document.addEventListener(\"click\", (e) => {\r\n            if (filterWrap.classList.contains(\"active\") && \r\n                !filterWrap.contains(e.target) && \r\n                e.target !== openFilterBtn) {\r\n                closeFilter();\r\n            }\r\n        });\r\n    \r\n        // Предотвращаем закрытие при клике внутри окна фильтра\r\n        filterWrap.addEventListener(\"click\", (e) => {\r\n            e.stopPropagation();\r\n        });\r\n    \r\n        // Обработчик свайпа вниз, который начинается ВНЕ окна фильтра\r\n        let swipeStartY = 0;\r\n        let swipeStartTarget = null;\r\n    \r\n        document.addEventListener('touchstart', (e) => {\r\n            if (filterWrap.classList.contains(\"active\")) {\r\n                swipeStartY = e.touches[0].clientY;\r\n                swipeStartTarget = e.target;\r\n                \r\n                const startedInsideFilter = filterWrap.contains(swipeStartTarget) || \r\n                                            swipeStartTarget === filterWrap ||\r\n                                            swipeStartTarget === openFilterBtn;\r\n                \r\n                if (startedInsideFilter) {\r\n                    swipeStartY = 0;\r\n                    swipeStartTarget = null;\r\n                }\r\n            }\r\n        }, { passive: true });\r\n    \r\n        document.addEventListener('touchmove', (e) => {\r\n            if (swipeStartY > 0 && filterWrap.classList.contains(\"active\")) {\r\n                const currentY = e.touches[0].clientY;\r\n                \r\n                if (currentY - swipeStartY > 100) {\r\n                    closeFilter();\r\n                    swipeStartY = 0;\r\n                }\r\n            }\r\n        }, { passive: true });\r\n    \r\n        document.addEventListener('touchend', () => {\r\n            swipeStartY = 0;\r\n            swipeStartTarget = null;\r\n        }, { passive: true });\r\n    }\r\n          \r\n         \r\n    \r\n    \r\n    /* Калькулятор */\r\n    const calculator = document.querySelector('.calculator');\r\n    if(calculator) {\r\n        const BASE_PRICE = 1200;\r\n        const radioGroups = calculator.querySelectorAll('input[type=\"radio\"]');\r\n        const totalPriceElement = document.getElementById('total-price');\r\n\r\n        // Обработчик изменений для всех радио-кнопок\r\n        radioGroups.forEach(radio => {\r\n            radio.addEventListener('change', updatePrice);\r\n        });\r\n        \r\n        function updatePrice() {\r\n            let total = BASE_PRICE;\r\n            \r\n            // Собираем все выбранные радио-кнопки\r\n            const selectedRadios = document.querySelectorAll('input[type=\"radio\"]:checked');\r\n            \r\n            // Суммируем значения data-price\r\n            selectedRadios.forEach(radio => {\r\n                total += parseInt(radio.dataset.price) || 0;\r\n            });\r\n            \r\n            // Обновляем отображение цены\r\n            if (selectedRadios.length > 0) {\r\n                totalPriceElement.textContent = `${total.toLocaleString('ru-RU')} рублей / сутки*`;\r\n            } else {\r\n                totalPriceElement.textContent = 'Выберите параметры';\r\n            }\r\n        }\r\n    }\r\n      \r\n\r\n\r\n\r\n    /* yandex map */\r\n    const mapPlaceholder = document.getElementById('map-placeholder');\r\n    const mapCoordinates = document.getElementById('map').dataset.coordinates ? document.getElementById('map').dataset.coordinates.split(\",\") : [47.231129, 39.728721];\r\n    const mapCatalogue = document.getElementById('map').dataset.catalogue ? document.getElementById('map').dataset.catalogue : \"\";\r\n    const mapAddress = document.getElementById('map').dataset.address ? document.getElementById('map').dataset.address : \"\";\r\n\r\n    console.log(mapCoordinates);\r\n    if (mapPlaceholder) {\r\n        mapPlaceholder.addEventListener('mouseenter', loadMap, { once: true });\r\n        mapPlaceholder.addEventListener('click', loadMap, { once: true });\r\n    } else {\r\n        loadMap();\r\n    }\r\n\r\n    function loadMap() {\r\n        if (!document.querySelector('[src=\"https://api-maps.yandex.ru/2.1/?lang=ru_RU\"]')) {\r\n            const script = document.createElement('script');\r\n            script.type = 'text/javascript';\r\n            script.src = 'https://api-maps.yandex.ru/2.1/?lang=ru_RU';\r\n            script.onload = initMap;\r\n            document.head.appendChild(script);\r\n        } else {\r\n            initMap();\r\n        }\r\n    }\r\n    \r\n    function initMap() {\r\n        const mapPlaceholder = document.getElementById('map-placeholder');\r\n        if (mapPlaceholder) {\r\n            mapPlaceholder.remove();\r\n        }\r\n    \r\n        ymaps.ready(function () {\r\n            const myMap = new ymaps.Map('map', {\r\n                center: mapCoordinates,\r\n                zoom: 13,\r\n                controls: []\r\n            });\r\n    \r\n            const myPlacemark = new ymaps.Placemark(\r\n                mapCoordinates,\r\n                {\r\n                    hintContent: mapCatalogue + \" \" + mapAddress,\r\n                    balloonContent: mapCatalogue + \" \" + mapAddress\r\n                },\r\n                {\r\n                    iconLayout: 'default#image',\r\n                    iconImageHref: '/assets/img/icons/map-pin.png',  //заменить на свою иконку\r\n                    iconImageSize: [42, 50],\r\n                    iconImageOffset: [-20, -25],\r\n                }\r\n            );\r\n    \r\n\r\n            console.log(myPlacemark);\r\n\r\n\r\n\r\n            myMap.geoObjects.add(myPlacemark);\r\n            myMap.behaviors.disable(['scrollZoom']);\r\n        });\r\n    }\r\n    /* end yandex map */\r\n\r\n\r\n    // close cookie \r\n\tconst cookieBtn = document.querySelector('.popup-cookie__btn')\r\n    if (cookieBtn) {\r\n        cookieBtn.addEventListener('click', () => {\r\n            document.querySelector('.popup-cookie').style.display = 'none';\r\n        })\r\n    }\r\n\r\n\r\n    /*  search */\r\n\tconst inputSearch = document.querySelectorAll('input[type=search]')\r\n\tif (inputSearch.length > 0) {\r\n\t\tinputSearch.forEach(elem => {\r\n\t\t\tconst wrapper = elem.closest('.search-wrapper')\r\n\t\t\tif (wrapper) {\r\n\t\t\t\tconst searchResultBlock = wrapper.querySelector('.popup__search-result')\r\n\t\t\t\tconst popularCitiesBlock = wrapper.querySelector('.popup__search')\r\n\t\t\t\tconst noResultsMessage = searchResultBlock.querySelector('.no-results-message')\r\n\r\n\t\t\t\tfunction search() {\r\n\t\t\t\t\tlet filter = elem.value.toUpperCase()\r\n\t\t\t\t\tlet ul = wrapper.querySelectorAll('.search-list')\r\n\t\t\t\t\tlet totalResults = 0\r\n\r\n\t\t\t\t\tul.forEach(item => {\r\n\t\t\t\t\t\tlet li = item.getElementsByTagName('li')\r\n\t\t\t\t\t\tfor (let i = 0; i < li.length; i++) {\r\n\t\t\t\t\t\t\tlet a = li[i].querySelector('.search-name')\r\n\t\t\t\t\t\t\tif (a.innerHTML.toUpperCase().indexOf(filter) > -1) {\r\n\t\t\t\t\t\t\t\tli[i].classList.remove('none')\r\n\t\t\t\t\t\t\t\ttotalResults++\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tli[i].classList.add('none')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n                    noResultsMessage.classList.toggle('none', totalResults > 0);\r\n\r\n\t\t\t\t\tif (elem.value.trim() === '') {\r\n\t\t\t\t\t\tsearchResultBlock.classList.add('none')\r\n\t\t\t\t\t\tpopularCitiesBlock.classList.remove('none')\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsearchResultBlock.classList.remove('none')\r\n\t\t\t\t\t\tpopularCitiesBlock.classList.add('none')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telem.addEventListener('input', search)\r\n\r\n                document.addEventListener('click', (event) => {\r\n                    if (!wrapper.contains(event.target)) {\r\n                        searchResultBlock.classList.add('none')\r\n                    }\r\n                })\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n    /*  end search  */  \r\n\r\n\r\n    /*  accordion  */\r\n\tconst acc = document.getElementsByClassName('accordion')\r\n\tfor (let i = 0; i < acc.length; i++) {\r\n        if(acc[i]) {\r\n            acc[i].addEventListener('click', function () {\r\n                const accContent = this.querySelector('.accordion__content')  || this.parentElement.querySelector('.accordion__content') \r\n                if (accContent.classList.contains('accordion__content--active')) {\r\n                    accContent.classList.remove('accordion__content--active');\r\n                    this.classList.remove('accordion--active');\r\n                    accContent.style.maxHeight = '0'; \r\n                } else {\r\n                    accContent.classList.add('accordion__content--active');\r\n                    this.classList.add('accordion--active');\r\n    \r\n                    const contentHeight = accContent.scrollHeight;\r\n                    accContent.style.maxHeight = `${contentHeight}px`;\r\n                }\r\n            })\r\n        }\r\n\t}\r\n\t/*  end accordion   */\r\n\r\n\r\n    /*  tab  */\r\n\tconst showTab = elTabBtn => {\r\n\t\tconst elTab = elTabBtn.closest('.tab');\r\n\t\tif (elTabBtn.classList.contains('active')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst targetId = elTabBtn.dataset.id;\r\n\t\tconst elTabPanes = elTab.querySelectorAll(`.tab-content[data-id=\"${targetId}\"]`);\r\n\r\n\t\tconst elTabBtnActive = elTab.querySelector('.tab-btn.active');\r\n\t\tif (elTabBtnActive) {\r\n\t\t\telTabBtnActive.classList.remove('active');\r\n\t\t}\r\n\r\n\t\tconst elTabPaneShow = elTab.querySelectorAll('.tab-content.active');\r\n\t\telTabPaneShow.forEach(pane => pane.classList.remove('active'));\r\n\r\n\t\telTabBtn.classList.add('active');\r\n\t\telTabPanes.forEach(pane => pane.classList.add('active'));\r\n\r\n\t};\r\n    \r\n    const tabButtons = document.querySelectorAll('.tab-btn')\r\n    const tabContent = document.querySelectorAll('.tab-content')\r\n\r\n    for (let i = 0; i < tabButtons.length; i++) {\r\n        tabButtons[i].style.order = 2 * i + 1;\r\n    }\r\n    for (let i = 0; i < tabContent.length; i++) {\r\n        tabContent[i].style.order = 2 * i + 2;\r\n    }\r\n\r\n\ttabButtons.forEach(btn => {\r\n        if(btn) {\r\n            btn.addEventListener('click', function (e) {\r\n                showTab(this);\r\n                showMoreElements();\r\n            });            \r\n        }\r\n\t});\r\n\t/*  end tab */\r\n\r\n\r\n    /*  filter element by checkbox */\r\n    // document.querySelectorAll('.sort__item input[type=\"checkbox\"]').forEach(function(checkbox) {\r\n    //     checkbox.addEventListener('change', function() {\r\n    //         filterItems('.sort__card', '.sort__block', '.sort__quantity span');\r\n    //     });\r\n    // });\r\n    // filterItems('.sort__card', '.sort_block', '.sort__quantity span');\r\n    \r\n    // function filterItems(itemSelector, filterGroupSelector, quantitySelector) {\r\n    //     const filterGroups = Array.from(document.querySelectorAll(filterGroupSelector)).map(group => {\r\n    //         return Array.from(group.querySelectorAll('input[type=\"checkbox\"]:checked')).map(cb => cb.id);\r\n    //     });\r\n    \r\n    //     document.querySelectorAll(itemSelector).forEach(function(item) {\r\n    //         const itemCategories = item.dataset.categories ? item.dataset.categories.split(' ') : [];\r\n    //         const matchesFilter = filterGroups.every(filters => {\r\n    //             if (filters.length === 0) return true;\r\n    //             return filters.some(filter => itemCategories.includes(filter));\r\n    //         });\r\n    //         if (matchesFilter) {\r\n    //             item.style.display = '';\r\n    //         } else {\r\n    //             item.style.display = 'none';\r\n    //         }\r\n    //     });\r\n    \r\n    //     const visibleItems = document.querySelectorAll(`${itemSelector}:not([style*=\"display: none\"])`).length;\r\n    //     const quantityElement = document.querySelector(quantitySelector);\r\n    //     if (quantityElement) {\r\n    //         quantityElement.textContent = visibleItems;\r\n    //     }\r\n    //     checkAndHideBlocksIfEmpty();\r\n    // }\r\n    /*  end filter element by checkbox  */\r\n\r\n\r\n\r\n\r\n    // quantity-card\r\n    function quantityElem() {\r\n        const quantityCards = document.querySelectorAll('.quantity-card');\r\n        const quantityElement = document.querySelector('.quantity span');\r\n        if (quantityElement) {\r\n            let visibleCards = 0;\r\n            quantityCards.forEach(card => {\r\n                if (card.offsetParent !== null) {\r\n                    visibleCards++;\r\n                }\r\n            });\r\n            quantityElement.textContent = visibleCards;\r\n        }\r\n    }\r\n    setTimeout(quantityElem, 100);\r\n\r\n\r\n\r\n    /*  btn more  */\r\n    function showMoreElements() {\r\n        const moreBtns = document.querySelectorAll('.btn-more');\r\n        moreBtns.forEach(moreBtn => {\r\n            if (moreBtn) {\r\n                const moreContent = moreBtn.previousElementSibling;\r\n    \r\n                if (moreContent.scrollHeight <= moreContent.clientHeight) {\r\n                    moreBtn.style.display = 'none'; \r\n                } else {\r\n                    moreBtn.style.display = 'block'; \r\n                    const textBtn = moreBtn.innerHTML; \r\n                    moreBtn.addEventListener('click', function() {\r\n                        const heightMoreContent = moreContent.style.maxHeight; \r\n                        this.classList.toggle('active');\r\n    \r\n                        if (moreContent.style.maxHeight) {\r\n                            moreContent.style.maxHeight = null;\r\n                            this.textContent = textBtn;\r\n                        } else {\r\n                            moreContent.style.maxHeight = moreContent.scrollHeight + \"px\"; \r\n                            this.textContent = 'Свернуть';\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n    showMoreElements();\r\n    /*  end btn more  */\r\n\r\n\r\n\r\n    // кнопка Показать еще\r\n    function showAllButtons() {\r\n        const allButtons = document.querySelectorAll('.show-btn');\r\n        \r\n        allButtons.forEach(button => {\r\n            const parentBlock = button.closest('.show-block');\r\n            const items = parentBlock.querySelectorAll('.show-item');\r\n    \r\n            const textShow = button.innerHTML;\r\n            const textHide = 'Скрыть';\r\n            \r\n            // Проверяем количество элементов\r\n            if (items.length <= 8) {\r\n                button.style.display = 'none';\r\n            } else {\r\n                button.style.display = 'block';\r\n                button.textContent = textShow;\r\n                \r\n                // Скрываем элементы\r\n                items.forEach((item, index) => {\r\n                    if (index >= 8) {\r\n                        item.style.display = 'none';\r\n                    }\r\n                });\r\n\r\n                // Обработчик клика по кнопке\r\n                button.addEventListener('click', function() {\r\n                    if (button.textContent == textHide) {\r\n                        // Скрываем элементы\r\n                        items.forEach((item, index) => {\r\n                            if (index >= 8) {\r\n                                item.style.display = 'none';\r\n                            }\r\n                        });\r\n                        button.textContent = textShow;\r\n                    } else {\r\n                        // Показываем все элементы\r\n                        items.forEach(item => {\r\n                            item.style.display = '';\r\n                        });\r\n                        button.textContent = textHide;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    showAllButtons();\r\n    // end кнопка Показать еще\r\n\r\n\r\n    /*   scrollTop  */\r\n\tconst buttonsUp = document.querySelectorAll('.is-scroll-up')\r\n    buttonsUp.forEach(buttonUp => {\r\n        if (buttonUp) {\r\n            buttonUp.addEventListener('click', function () {\r\n                window.scrollTo({\r\n                    top: 0,\r\n                    behavior: 'smooth',\r\n                })\r\n            })\r\n        }\r\n    });\r\n    /*   end scrollTop  */\r\n\r\n})\r\n\r\n/* navigation */\r\nconst articleNavigation = document.querySelector(\".navigation\");\r\nif (articleNavigation) {\r\n    const jsScrollBlockList = document.querySelectorAll(\r\n        \".text-block h1, .text-block h2, .text-block h3, .text-block h4, .text-block h5\"\r\n    );\r\n\r\n    if (jsScrollBlockList.length > 0) {\r\n        for (let i = 0; i < jsScrollBlockList.length; i += 1) {\r\n            const jsScrollBlock = jsScrollBlockList[i];\r\n            const titleBlock = jsScrollBlock.textContent;\r\n            const articleNavigationList =\r\n                document.querySelector(\".navigation__list\");\r\n            const articleNavigationItem = document.createElement(\"li\");\r\n            const articleNavigationLink = document.createElement(\"a\");\r\n            if (jsScrollBlock.tagName == \"H1\") {\r\n                articleNavigationItem.classList.add(\"nav-title-h1\");\r\n            }\r\n            articleNavigationItem.classList.add(\"navigation__item\");\r\n            if (jsScrollBlock.tagName == \"H2\") {\r\n                articleNavigationItem.classList.add(\"nav-title-h2\");\r\n            } else if (jsScrollBlock.tagName == \"H3\") {\r\n                articleNavigationItem.classList.add(\"nav-title-h3\");\r\n            } else if (jsScrollBlock.tagName == \"H4\") {\r\n                articleNavigationItem.classList.add(\"nav-title-h4\");\r\n            } else if (jsScrollBlock.tagName == \"H5\") {\r\n                articleNavigationItem.classList.add(\"nav-title-h5\");\r\n            } else if (jsScrollBlock.tagName == \"H6\") {\r\n                articleNavigationItem.classList.add(\"nav-title-h6\");\r\n            }\r\n            articleNavigationLink.classList.add(\"navigation__link\");\r\n            jsScrollBlock.setAttribute(\"id\", `${i}`);\r\n            articleNavigationLink.setAttribute(\"href\", `$${i}`);\r\n            articleNavigationLink.textContent = \" \" + titleBlock;\r\n            articleNavigationItem.append(articleNavigationLink);\r\n            articleNavigationList.append(articleNavigationItem);\r\n        }\r\n        document.querySelectorAll('a[href^=\"$\"').forEach((link) => {\r\n            link.addEventListener(\"click\", function (e) {\r\n                e.preventDefault();\r\n                let href = this.getAttribute(\"href\").substring(1);\r\n                const scrollTarget = document.getElementById(href);\r\n                const topOffset = 50;\r\n                const elementPosition = scrollTarget.getBoundingClientRect().top;\r\n                const offsetPosition = elementPosition - topOffset;\r\n                window.scrollBy({\r\n                    top: offsetPosition,\r\n                    behavior: \"smooth\",\r\n                });\r\n            });\r\n        });\r\n    } else {\r\n        if(articleNavigation.querySelector(\".navigation\")) {\r\n            articleNavigation.querySelector(\".navigation\").remove();\r\n        }\r\n    }\r\n}\r\n/* end navigation */\r\n\r\n\r\n// попап квиз\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    const pages = document.querySelectorAll(\".popup-quiz__page\");\r\n    const btnPrev = document.querySelector(\".popup-quiz__btn-prev\");\r\n    const btnNext = document.querySelector(\".popup-quiz__btn-next\");\r\n    const pagination = document.querySelector(\".popup-quiz__paginations\");\r\n    const btns = document.querySelector(\".popup-quiz__bottom\");\r\n\r\n    let currentPage = 0;\r\n\r\n    function showPage(index) {\r\n        pages.forEach((page, i) => {\r\n            page.style.display = i === index ? \"block\" : \"none\";\r\n        });\r\n\r\n        // кнопка \"Предыдущий\"\r\n        btnPrev.disabled = index === 0;\r\n\r\n        // обновление пагинации\r\n        pagination.querySelector(\"span:first-child\").textContent = String(index + 1).padStart(2, \"0\");\r\n        pagination.querySelector(\"span:last-child\").textContent = String(pages.length-1).padStart(2, \"0\");\r\n\r\n        // проверяем доступность кнопки \"Следующий\"\r\n        checkNextAvailability();\r\n\r\n        // если последняя страница → скрываем кнопку \"Следующий\"\r\n        if (index === pages.length - 1) {\r\n            btns.style.display = \"none\";\r\n        } else {\r\n            btns.style.display = \"flex\";\r\n        }\r\n    }\r\n\r\n    function checkNextAvailability() {\r\n        const inputs = pages[currentPage].querySelectorAll(\"input[type=radio], input[type=checkbox]\");\r\n        if (inputs.length === 0) {\r\n            btnNext.disabled = false;\r\n            return;\r\n        }\r\n\r\n        let checked = Array.from(inputs).some(input => input.checked);\r\n        btnNext.disabled = !checked;\r\n    }\r\n\r\n    // события\r\n    btnPrev.addEventListener(\"click\", () => {\r\n        console.log(btnPrev)\r\n        if (currentPage > 0) {\r\n            currentPage--;\r\n            showPage(currentPage);\r\n        }\r\n    });\r\n\r\n    btnNext.addEventListener(\"click\", () => {\r\n        console.log(\"btnNext\")\r\n        if (currentPage < pages.length - 1) {\r\n            currentPage++;\r\n            showPage(currentPage);\r\n        }\r\n    });\r\n\r\n    // следим за изменением radio/checkbox\r\n    pages.forEach(page => {\r\n        page.addEventListener(\"change\", () => {\r\n            if (page === pages[currentPage]) {\r\n                checkNextAvailability();\r\n            }\r\n        });\r\n    });\r\n\r\n    // инициализация\r\n    showPage(currentPage);\r\n});\r\n\r\n\r\n// мобильное меню\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    const arrows = document.querySelectorAll(\".header__nav-arrow\");\r\n  \r\n    function isMobile() {\r\n      return window.innerWidth <= 1024;\r\n    }\r\n  \r\n    function setHeight(el) {\r\n      el.style.maxHeight = el.scrollHeight + \"px\";\r\n    }\r\n  \r\n    // обновляем высоту у родителей\r\n    function updateParents(submenu) {\r\n      let parent = submenu.parentElement;\r\n      while (parent) {\r\n        if (parent.tagName === \"UL\" && parent.classList.contains(\"open\")) {\r\n          parent.style.maxHeight = parent.scrollHeight + \"px\";\r\n        }\r\n        parent = parent.parentElement;\r\n      }\r\n    }\r\n  \r\n    arrows.forEach(arrow => {\r\n      arrow.addEventListener(\"click\", e => {\r\n        if (!isMobile()) return;\r\n        e.preventDefault();\r\n  \r\n        const parentItem = arrow.closest(\".header__nav-item\");\r\n        const submenu = parentItem.querySelector(\"ul\");\r\n  \r\n        if (submenu) {\r\n          if (submenu.classList.contains(\"open\")) {\r\n            // закрытие\r\n            submenu.style.maxHeight = submenu.scrollHeight + \"px\"; \r\n            submenu.offsetHeight; \r\n            submenu.style.maxHeight = \"0px\";\r\n            submenu.classList.remove(\"open\");\r\n            arrow.classList.remove(\"active\");\r\n          } else {\r\n            // открытие\r\n            submenu.classList.add(\"open\");\r\n            setHeight(submenu);\r\n            arrow.classList.add(\"active\");\r\n            updateParents(submenu);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  \r\n    document.querySelectorAll(\".header__sublist, .header__subsublist\").forEach(ul => {\r\n      ul.addEventListener(\"transitionend\", () => {\r\n        if (ul.classList.contains(\"open\")) {\r\n          setHeight(ul);       \r\n          updateParents(ul);  \r\n        }\r\n      });\r\n    });\r\n  \r\n    // сброс на десктопе\r\n    window.addEventListener(\"resize\", () => {\r\n      if (!isMobile()) {\r\n        document.querySelectorAll(\".header__sublist, .header__subsublist\").forEach(ul => {\r\n          ul.style.maxHeight = null;\r\n          ul.classList.remove(\"open\");\r\n        });\r\n        arrows.forEach(arrow => arrow.classList.remove(\"active\"));\r\n      }\r\n    });\r\n});\r\n  \r\n"],"names":["Fancybox","bind","animationItems","document","querySelectorAll","length","onEntry","e","forEach","isIntersecting","target","classList","add","let","options","threshold","observer","IntersectionObserver","observe","scrollWidthFunc","scrollWidth","window","innerWidth","body","clientWidth","querySelector","style","paddingRight","scrollTop","articleNavigation","addEventListener","scrollTo","top","behavior","burgerMenu","headerMobile","header","plashka","contains","display","remove","toggle","popupClose","popupActive","setTimeout","removeAttribute","popupOpenBtns","popups","originalTitlePopup2","innerHTML","el","closest","preventDefault","currentItems","path","currentTarget","dataset","currentPopup","popup","getAttribute","originaTitle","currentTitile","textContent","originalText","stopPropagation","filter","applyBtn","clearBtn","checkboxes","cardsContainer","cards","tagButtons","moreBtn","sortNameSelect","getElementById","sortPriceSelect","showAllTags","updateTagsVisibility","btn","index","updateCheckboxesState","activeFilters","activeTags","cb","filterGroup","checked","name","split","push","labels","innerText","trim","tag","checkbox","willBeEmpty","disabled","parentElement","opacity","currentFilters","testFilters","hasVisibleCard","card","visible","group","cardValues","matchFound","value","includes","applyFilters","cardTags","tags","map","t","some","applySorting","sortedCards","Array","from","c","sort","a","b","nameA","toLowerCase","nameB","localeCompare","priceA","extractPrice","priceB","appendChild","priceEl","priceText","replace","parseInt","tagCode","this","tagValue","url","URL","location","href","searchParams","set","toString","filterObjects","openFilterBtn","filterWrap","applyFilterBtn","clearFilterBtn","closeFilter","swipeStartY","swipeStartTarget","touches","clientY","passive","calculator","radioGroups","totalPriceElement","updatePrice","total","selectedRadios","radio","price","toLocaleString","mapPlaceholder","mapCoordinates","coordinates","mapCatalogue","catalogue","mapAddress","address","loadMap","script","initMap","createElement","type","src","onload","head","ymaps","ready","myMap","Map","center","zoom","controls","myPlacemark","Placemark","hintContent","balloonContent","iconLayout","iconImageHref","iconImageSize","iconImageOffset","console","log","geoObjects","behaviors","disable","once","cookieBtn","inputSearch","acc","elem","wrapper","searchResultBlock","popularCitiesBlock","noResultsMessage","toUpperCase","ul","totalResults","item","li","getElementsByTagName","i","indexOf","event","getElementsByClassName","contentHeight","accContent","maxHeight","scrollHeight","tabButtons","tabContent","order","showMoreElements","moreContent","previousElementSibling","clientHeight","textBtn","elTabBtn","elTabPanes","elTabBtnActive","elTab","targetId","id","pane","quantityCards","quantityElement","visibleCards","offsetParent","button","items","textShow","buttonUp","jsScrollBlockList","jsScrollBlock","titleBlock","articleNavigationList","articleNavigationItem","articleNavigationLink","tagName","setAttribute","append","link","substring","elementPosition","getBoundingClientRect","scrollBy","pages","btnPrev","btnNext","pagination","btns","currentPage","showPage","page","String","padStart","checkNextAvailability","inputs","input","arrows","isMobile","setHeight","updateParents","submenu","parent","arrow","offsetHeight"],"mappings":"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"}